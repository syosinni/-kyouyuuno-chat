<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>世界ステート地図</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    #map-container {
      width: 100vw;
      height: 100vh;
    }
    svg {
      width: 100%;
      height: 100%;
      background-color: #87CEFA; /* 海の色 */
      cursor: grab;
    }
    path {
      fill: white;
      stroke: black;
      stroke-width: 0.5;
    }
    .selected {
      fill: red !important;
    }
  </style>
</head>
<body>

<div id="map-container">
  <!-- SVG地図（一部のみ例示） -->
  <svg id="worldMap" viewBox="0 0 2000 1001" xmlns="http://www.w3.org/2000/svg">
    <!-- 仮のパス: 実際には各ステートのパスをここに配置 -->
    <path d="M100,100 L200,100 L200,200 L100,200 Z" />
    <path d="M300,100 L400,100 L400,200 L300,200 Z" />
    <!-- ここに各国・各州のパス（ステート）が続く -->
  </svg>
</div>

<script>
const svg = document.getElementById('worldMap');

// ステートを赤く塗る処理
svg.addEventListener('click', (e) => {
  if (e.target.tagName === 'path' || e.target.tagName === 'PATH') {
    e.target.classList.toggle('selected');
  }
});

// 拡大・縮小のためのスケーリング
let viewBox = [0, 0, 2000, 1001];

svg.addEventListener("wheel", function (event) {
  event.preventDefault();
  const zoomAmount = 100;
  const direction = event.deltaY > 0 ? 1 : -1;

  viewBox[2] += zoomAmount * direction;
  viewBox[3] += (zoomAmount * direction) * (1001 / 2000);
  svg.setAttribute("viewBox", viewBox.join(" "));
});

// ドラッグで移動
let isPanning = false;
let startPoint = { x: 0, y: 0 };

svg.addEventListener('mousedown', function (event) {
  isPanning = true;
  startPoint = { x: event.clientX, y: event.clientY };
  svg.style.cursor = 'grabbing';
});

svg.addEventListener('mousemove', function (event) {
  if (isPanning) {
    const dx = (startPoint.x - event.clientX) * (viewBox[2] / svg.clientWidth);
    const dy = (startPoint.y - event.clientY) * (viewBox[3] / svg.clientHeight);
    viewBox[0] += dx;
    viewBox[1] += dy;
    startPoint = { x: event.clientX, y: event.clientY };
    svg.setAttribute('viewBox', viewBox.join(' '));
  }
});

svg.addEventListener('mouseup', function () {
  isPanning = false;
  svg.style.cursor = 'grab';
});

svg.addEventListener('mouseleave', function () {
  isPanning = false;
  svg.style.cursor = 'grab';
});
</script>

</body>
</html>
