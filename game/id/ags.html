<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>攻撃防衛支援システム</title>
  <style>
    body { font-family: sans-serif; margin: 20px; background: #f2f2f2; }
    h1 { color: #333; }
    .section { margin-bottom: 20px; padding: 10px; background: white; border-radius: 8px; box-shadow: 0 2px 4px #ccc; }
    input, button, select { padding: 5px; margin: 5px 0; }
    .log { background: #eee; padding: 10px; border-radius: 5px; height: 150px; overflow-y: scroll; }
  </style>
</head>
<body>
  <h1>攻撃防衛支援システム</h1>

  <div class="section">
    <h2>① 資金システム</h2>
    <p>現在の資金: <span id="money">1000</span>円</p>
    <button onclick="addMoney(500)">資金 +500</button>
    <button onclick="spendMoney(300)">部隊購入（300円）</button>
  </div>

  <div class="section">
    <h2>② 戦闘システム</h2>
    <label>自軍攻撃力: <input type="number" id="atk" value="100"></label><br>
    <label>敵軍防御力: <input type="number" id="def" value="80"></label><br>
    <button onclick="battle()">戦闘開始</button>
    <div class="log" id="battleLog"></div>
  </div>

  <div class="section">
    <h2>③ 制海権・制空権システム</h2>
    <label>地域: 
      <select id="region">
        <option value="A">地域A</option>
        <option value="B">地域B</option>
      </select>
    </label><br>
    <button onclick="setControl('sea')">制海権獲得</button>
    <button onclick="setControl('air')">制空権獲得</button>
    <button onclick="removeControl()">権利喪失</button>
    <p id="controlStatus">現在の権利: なし</p>
  </div>

  <script>
    // --- 資金 ---
    let money = 1000;
    function updateMoney() {
      document.getElementById("money").innerText = money;
    }
    function addMoney(amount) {
      money += amount;
      updateMoney();
    }
    function spendMoney(amount) {
      if (money >= amount) {
        money -= amount;
        updateMoney();
      } else {
        alert("資金が足りません！");
      }
    }

    // --- 戦闘 ---
    function battle() {
      const atk = parseInt(document.getElementById("atk").value);
      const def = parseInt(document.getElementById("def").value);
      const result = atk - def;
      const log = document.getElementById("battleLog");

      if (result > 0) {
        log.innerHTML += `<p>勝利！差: ${result}</p>`;
      } else if (result === 0) {
        log.innerHTML += `<p>引き分け！</p>`;
      } else {
        log.innerHTML += `<p>敗北…差: ${Math.abs(result)}</p>`;
      }
      log.scrollTop = log.scrollHeight;
    }

    // --- 制海権・制空権 ---
    const controlMap = {}; // 地域ごとの権利管理
    function updateControlStatus() {
      const region = document.getElementById("region").value;
      const status = controlMap[region] || "なし";
      document.getElementById("controlStatus").innerText = `現在の権利: ${status}`;
    }

    function setControl(type) {
      const region = document.getElementById("region").value;
      if (type === 'sea') controlMap[region] = "制海権";
      if (type === 'air') controlMap[region] = "制空権";
      updateControlStatus();
    }

    function removeControl() {
      const region = document.getElementById("region").value;
      delete controlMap[region];
      updateControlStatus();
    }

    // 初期表示
    updateMoney();
    updateControlStatus();
  </script>
</body>
</html>
